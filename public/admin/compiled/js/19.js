(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{374:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"c-component"},[e("navigation",{attrs:{topRoute:t.topRoute,position:t.position}}),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"in"},[e("form",{on:{submit:function(s){return s.preventDefault(),t.submit(s)}}},[e("table",{staticClass:"input-tb"},[e("tbody",[e("tr",{class:t.getClass(t.error.push_type),attrs:{id:"push_type"}},[e("td",[t._v("群推类型")]),t._v(" "),e("td",[e("i-radio-group",{model:{value:t.form.push_type,callback:function(s){t.$set(t.form,"push_type",s)},expression:"form.push_type"}},t._l(t.business.push_type_for_user,(function(s,i){return e("i-radio",{key:i,attrs:{label:i}},[t._v(t._s(s))])})),1),t._v(" "),e("span",{staticClass:"necessary"},[t._v("*")]),t._v(" "),e("span",{staticClass:"tip"}),t._v(" "),e("span",{staticClass:"msg"},[t._v(t._s(t.error.push_type))])],1)]),t._v(" "),e("tr",{class:t.getClass(t.error.role),attrs:{id:"role"}},[e("td",[t._v("推送群体")]),t._v(" "),e("td",[e("i-radio-group",{model:{value:t.form.role,callback:function(s){t.$set(t.form,"role",s)},expression:"form.role"}},t._l(t.business.role_for_push,(function(s,i){return e("i-radio",{key:i,attrs:{label:i}},[t._v(t._s(s))])})),1),t._v(" "),e("span",{staticClass:"necessary"},[t._v("*")]),t._v(" "),e("span",{staticClass:"tip"}),t._v(" "),e("span",{staticClass:"msg"},[t._v(t._s(t.error.role))])],1)]),t._v(" "),e("tr",{class:t.getClass(t.error.user_id),attrs:{id:"user_id"}},[e("td",[t._v("目标用户")]),t._v(" "),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user_id,expression:"form.user_id"}],staticClass:"form-text",attrs:{type:"text"},domProps:{value:t.form.user_id},on:{input:function(s){s.target.composing||t.$set(t.form,"user_id",s.target.value)}}}),t._v(" "),e("span",{staticClass:"necessary"}),t._v(" "),e("span",{staticClass:"tip"},[t._v("仅在 推送群体 = 指定用户推送的时候需要填写；请填写要推送的用户id，如果有多个，请用逗号隔开。")]),t._v(" "),e("span",{staticClass:"msg"},[t._v(t._s(t.error.user_id))])])]),t._v(" "),e("tr",{class:t.getClass(t.error.type),attrs:{id:"type"}},[e("td",[t._v("推送类型")]),t._v(" "),e("td",[e("i-radio-group",{model:{value:t.form.type,callback:function(s){t.$set(t.form,"type",s)},expression:"form.type"}},t._l(t.business.push_type_for_push,(function(s,i){return e("i-radio",{key:i,attrs:{label:i}},[t._v(t._s(s))])})),1),t._v(" "),e("span",{staticClass:"necessary"},[t._v("*")]),t._v(" "),e("span",{staticClass:"tip"}),t._v(" "),e("span",{staticClass:"msg"},[t._v(t._s(t.error.type))])],1)]),t._v(" "),e("tr",{class:t.getClass(t.error.title),attrs:{id:"title"}},[e("td",[t._v("推送标题")]),t._v(" "),e("td",[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"form-textarea",domProps:{value:t.form.title},on:{input:function(s){s.target.composing||t.$set(t.form,"title",s.target.value)}}}),t._v(" "),e("span",{staticClass:"necessary"},[t._v("*")]),t._v(" "),e("span",{staticClass:"tip"}),t._v(" "),e("span",{staticClass:"msg"},[t._v(t._s(t.error.title))])])]),t._v(" "),e("tr",{class:t.getClass(t.error.desc),attrs:{id:"desc"}},[e("td",[t._v("推送描述")]),t._v(" "),e("td",[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.desc,expression:"form.desc"}],staticClass:"form-textarea",domProps:{value:t.form.desc},on:{input:function(s){s.target.composing||t.$set(t.form,"desc",s.target.value)}}}),t._v(" "),e("span",{staticClass:"necessary"}),t._v(" "),e("span",{staticClass:"tip"}),t._v(" "),e("span",{staticClass:"msg"},[t._v(t._s(t.error.desc))])])]),t._v(" "),e("tr",{class:t.getClass(t.error.content),attrs:{id:"content"}},[e("td",[t._v("推送内容")]),t._v(" "),e("td",[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.content,expression:"form.content"}],staticClass:"form-textarea",domProps:{value:t.form.content},on:{input:function(s){s.target.composing||t.$set(t.form,"content",s.target.value)}}}),t._v(" "),e("span",{staticClass:"necessary"}),t._v(" "),e("span",{staticClass:"tip"}),t._v(" "),e("span",{staticClass:"msg"},[t._v(t._s(t.error.content))])])]),t._v(" "),t._m(0)])])])])]),t._v(" "),e("v-loading",{ref:"loading"})],1)};i._withStripped=!0;var a={name:"project",data:function(){return{form:{push_type:"multiple",role:"all",type:"system"},error:{},ins:{loading:null},pending:{submit:null}}},created:function(){},mounted:function(){this.initDom(),this.initIns(),this.getData()},methods:{getData:function(){var t=this;"edit"==this.param.mode&&(this.ins.loading.show(),Api.push.detail(this.param.id,(function(s){"designation"==s.role&&G.isValid(s.user_id)&&(s.user_id=G.jsonDecode(s.user_id).join(",")),t.form=s}),(function(s){t.alert(s)}),(function(){t.ins.loading.hide()})))},initDom:function(){},initIns:function(){this.ins.loading=this.$refs.loading.ins.loading},check:function(){return!0},submit:function(){var t=this;if(this.pending.submit)this.alert("请求中...请耐心等待");else if(this.check()){this.ins.loading.listen("close",(function(){t.pending.submit=!1})),this.pending.submit=!0,this.ins.loading.show();var s=this;Api.push[this.param.mode](this.form,(function(e){t.error={},t.alert("操作成功",{btn:[{name:"继续"+("edit"==t.param.mode?"编辑":"添加"),callback:function(){this.hide()}},{name:"推送列表",callback:function(){s.location("/push/list")}}]})}),(function(s,e){t.error={},-400==e&&(t.error=s,t.vScroll(G.v.firstKey(t.error)))}),(function(){t.pending.submit=!1,t.ins.loading.hide(),t.ins.loading.listen("close",null)}))}}}},r=(e(380),e(466),e(467),e(14)),n=Object(r.a)(a,i,[function(){var t=this.$createElement,s=this._self._c||t;return s("tr",[s("td",{attrs:{colspan:"2"}},[s("button",{staticClass:"run-button run-button-submit",attrs:{type:"submit"}},[this._v("提交")])])])}],!1,null,"6a969924",null);n.options.__file="source/vue/component/push/push.vue";s.default=n.exports},377:function(t,s,e){},380:function(t,s,e){"use strict";var i=e(377);e.n(i).a},419:function(t,s,e){},420:function(t,s,e){},466:function(t,s,e){"use strict";var i=e(419);e.n(i).a},467:function(t,s,e){"use strict";var i=e(420);e.n(i).a}}]);